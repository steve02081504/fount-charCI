# рдлрд╛рдЙрдиреНрдЯ-рдЪрд╛рд░рд╕реАрдЖрдИ (fount-charCI)

[![рдлрд╛рдЙрдиреНрдЯ рд░реЗрдкреЛ](https://steve02081504.github.io/fount/badges/fount_repo.svg)](https://github.com/steve02081504/fount)

[![English (United Kingdom)](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/United-Kingdom.png)](./readme.en-UK.md)
[![цЧецЬмшкЮ](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Japan.png)](./readme.ja-JP.md)
[![ф╕нцЦЗ](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/China.png)](./readme.zh-CN.md)
[![Deutsch](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Germany.png)](./readme.de-DE.md)
[![Espa├▒ol](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Spain.png)](./readme.es-ES.md)
[![Fran├зais](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/France.png)](./readme.fr-FR.md)
[![рд╣рд┐рдиреНрджреА](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/India.png)](./readme.hi-IN.md)
[![Italiano](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Italy.png)](./readme.it-IT.md)
[![эХЬъ╡ньЦ┤](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/South-Korea.png)](./readme.ko-KR.md)
[![Portugu├кs (Brasil)](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Brazil.png)](./readme.pt-BR.md)
[![╨а╤Г╤Б╤Б╨║╨╕╨╣](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Russia.png)](./readme.ru-RU.md)
[![Tiс║┐ng Viс╗Зt](https://raw.githubusercontent.com/gosquared/flags/master/flags/flags/shiny/48/Vietnam.png)](./readme.vi-VN.md)

рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд▓реЗрдХрд┐рди рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдирд┐рд░рдВрддрд░ рдПрдХреАрдХрд░рдг (CI) рдЙрдкрдХрд░рдг, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ [рдлрд╛рдЙрдиреНрдЯ](https://github.com/steve02081504/fount) рднреВрдорд┐рдХрд╛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдФрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреА рднреВрдорд┐рдХрд╛рдПрдБ stably рдЪрд▓реЗрдВред

рдпрд╣ рдЖрдкрдХреЛ рдХреЛрдб-рд╕реНрддрд░реАрдп рддреНрд░реБрдЯрд┐рдпреЛрдВ рдЬреИрд╕реЗ рд╕рд┐рдВрдЯреИрдХреНрд╕ рд╕рдорд╕реНрдпрд╛рдУрдВ, рд╡рд┐рдлрд▓ рдПрдкреАрдЖрдИ рдХреЙрд▓реЛрдВ рдФрд░ рдЯреВрд▓ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдореЗрдВ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдкрдХрдбрд╝рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд░рд┐рд▓реАрдЬ рд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреА рднреВрдорд┐рдХрд╛ рдХреА рдмреБрдирд┐рдпрд╛рджреА рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рд╣реЛрддреА рд╣реИ рдФрд░ рддреБрдЪреНрдЫ рдЧрд▓рддрд┐рдпреЛрдВ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## тЬи рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ

рдпрд╣ CI рдЙрдкрдХрд░рдг рдЖрдкрдХреА рднреВрдорд┐рдХрд╛ рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рдордЬрдмреВрддреА рдХреЗ рдкрд░реАрдХреНрд╖рдг рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреНрд╖реЗрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

- тЬЕ **рд╕рдВрд░рдЪрд┐рдд рдкрд░реАрдХреНрд╖рдг**: рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдг рдорд╛рдорд▓реЛрдВ рдХреЛ Jest-рдЬреИрд╕реЗ `test` рдмреНрд▓реЙрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ, рдЬрд┐рд╕рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕реНрддрд░ рдХреЗ рдиреЗрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣реЛ, рдЬрд┐рд╕рд╕реЗ рдЖрдкрдХреЗ рдкрд░реАрдХреНрд╖рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реНрдкрд╖реНрдЯ рдФрд░ рдкрдврд╝рдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рдПрдВред
- тЬЕ **рд╕рдорд╡рд░реНрддреА рдФрд░ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдкрд░реАрдХреНрд╖рдг**: рдЧрддрд┐ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди, рдпрд╛ `await` рдХреЗ рд╕рд╛рде рдЕрдиреБрдХреНрд░рдорд┐рдХ рдирд┐рд╖реНрдкрд╛рджрди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ред
- тЬЕ **рдЯреЗрд╕реНрдЯ рд╣реБрдХ**: рдкрд░реАрдХреНрд╖рдг рдЬреАрд╡рдирдЪрдХреНрд░ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдЪрд░рдгреЛрдВ рдореЗрдВ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдлрд╛рдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП `beforeAll`, `afterAll`, `beforeEach`, рдФрд░ `afterEach` рд╣реБрдХ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
- тЬЕ **рдкреГрдердХ рдкрд░реАрдХреНрд╖рдг рд╡рд╛рддрд╛рд╡рд░рдг**: рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рдХрд╛ рдЕрдкрдирд╛ рд╕реНрд╡рддрдВрддреНрд░, рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рд╛рдл рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ (рдлрд╝рд╛рдЗрд▓ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП) рдФрд░ HTTP рд░рд╛рдЙрдЯрд░ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдмреАрдЪ рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХреЛ рд░реЛрдХрддрд╛ рд╣реИред
- тЬЕ **рдЕрднрд┐рдХрдерди-рдЪрд╛рд▓рд┐рдд**: `assert` рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ, рдЬреЛ рд╡рд┐рдлрд▓рддрд╛ рдкрд░ рд╕реНрдкрд╖реНрдЯ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИред
- тЬЕ **рдмрд╣реБ-рдЪрд░рдгреАрдп рдЗрдВрдЯрд░реИрдХреНрд╢рди рд╕рд┐рдореБрд▓реЗрд╢рди**: AI рдХреЗ рд╕рдВрдкреВрд░реНрдг "рд╕реЛрдЪ -> рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ -> рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдВ" рдкреНрд░рд╡рд╛рд╣ рдХрд╛ рд╕рдЯреАрдХ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ, рдЬрдЯрд┐рд▓ `replyHandler` рддрд░реНрдХ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВред
- тЬЕ **рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧ рдФрд░ рдкреНрд░реЙрдореНрдкреНрдЯ рдирд┐рд░реАрдХреНрд╖рдг**: рдЯреВрд▓ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдмрд╛рдж AI рдХреЛ рд▓реМрдЯрд╛рдИ рдЧрдИ рд╕рд┐рд╕реНрдЯрдо-рд╕реНрддрд░реАрдп рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо, рдФрд░ AI рдХреЛ рднреЗрдЬреЗ рдЧрдП рдЕрдВрддрд┐рдо рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рднреА рд╕рдХреНрд╖рдо, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рддрд░реНрдХ рдФрд░ рдбреЗрдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдЕрдкреЗрдХреНрд╖рд╛ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИрдВред
- тЬЕ **рд╡рд┐рд╕реНрддреГрдд рдкрд░реАрдХреНрд╖рдг рд░рд┐рдкреЛрд░реНрдЯ**: GitHub Actions рдореЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реБрдВрджрд░, рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдкрд░реАрдХреНрд╖рдг рд╕рд╛рд░рд╛рдВрд╢ рд░рд┐рдкреЛрд░реНрдЯ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдЕрд╡рдзрд┐, рд▓реЙрдЧ рдФрд░ рддреНрд░реБрдЯрд┐ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

> LLM-рдЬрдирд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреА рдЧреИрд░-рдирд┐рдпрддрд╛рддреНрдордХ рдкреНрд░рдХреГрддрд┐ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдпрд╣ рдЙрдкрдХрд░рдг рдХрд┐рд╕реА рдкреНрд░реЙрдореНрдкреНрдЯ рдХреА рдЧреБрдгрд╡рддреНрддрд╛ рдпрд╛ AI-рдЬрдирд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреА рдпреЛрдЧреНрдпрддрд╛ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди **рдирд╣реАрдВ** рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдореВрд▓ рдореВрд▓реНрдп рднреВрдорд┐рдХрд╛ рдХреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рднрд╛рдЧреЛрдВ рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрдиреЗ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИред

## ЁЯЪА рддреНрд╡рд░рд┐рдд рдЖрд░рдВрдн

рдЕрдкрдиреЗ рдлрд╛рдЙрдиреНрдЯ рднреВрдорд┐рдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рддреАрди рдЪрд░рдгреЛрдВ рдореЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкрд░реАрдХреНрд╖рдг рд╕реЗрдЯ рдХрд░реЗрдВред

### рдЪрд░рдг 1: рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ

рдЕрдкрдиреА рднреВрдорд┐рдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рд░реВрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ, CI рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ: `.github/workflows/CI.yml`ред

### рдЪрд░рдг 2: рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реЗ рднрд░реЗрдВ

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреЛ `CI.yml` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред рдпрд╣ рдХреЛрдб рдкреБрд╢ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдПрдЧрд╛ред

```yaml
name: Test Running

permissions:
  contents: read
  actions: write # рдХреИрд╢ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ

on:
  # рдореИрдиреНрдпреБрдЕрд▓ рдЯреНрд░рд┐рдЧрд░рд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
  workflow_dispatch:
  # .mjs рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрджрд▓рдиреЗ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ
  push:
    paths:
      - '**.mjs'
    # рд╕рдВрд╕реНрдХрд░рдг рд░рд┐рд▓реАрдЬрд╝ рдкрд░ рдЯреНрд░рд┐рдЧрд░рд┐рдВрдЧ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЯреИрдЧ рдкреБрд╢ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВ
    tags-ignore:
      - '*'
    # рдХрд┐рд╕реА рднреА рд╢рд╛рдЦрд╛ рд╕реЗ рдкреБрд╢ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
    branches:
      - '*'

jobs:
  test-running:
    runs-on: ubuntu-latest
    steps:
      - uses: steve02081504/fount-charCI@master
        with:
          # рдЕрдкрдиреЗ CI рдкрд░реАрдХреНрд╖рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдкрде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ
          CI-filepath: .github/workflows/CI.mjs
          # (рд╡реИрдХрд▓реНрдкрд┐рдХ) CI рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ "CI-user" рд╣реИ
          # CI-username: my-ci-user
```

### рдЪрд░рдг 3: CI рдкрд░реАрдХреНрд╖рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдПрдБ

рдЕрдкрдиреА рднреВрдорд┐рдХрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рд░реВрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ, CI рдПрдВрдЯреНрд░реА рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ: `.github/workflows/CI.mjs`ред рдиреАрдЪреЗ рдПрдХ рдЖрдзреБрдирд┐рдХ, рдмреБрдирд┐рдпрд╛рджреА рдкрд░реАрдХреНрд╖рдг рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИ:

```javascript
// fountCharCI рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╡реИрд╢реНрд╡рд┐рдХ рджрд╛рдпрд░реЗ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реАрдзреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ
const CI = fountCharCI;

// --- рдкрд░реАрдХреНрд╖рдг рдорд╛рдорд▓рд╛ 1: AI рд╕реНрд░реЛрдд рдХреЗ рдмрд┐рдирд╛ рдлрд╝реЙрд▓рдмреИрдХ рд╣реИрдВрдбрд▓рд┐рдВрдЧ ---
await CI.test('noAI Fallback', async () => {
	// рдлрд╝реЙрд▓рдмреИрдХ рд╣реИрдВрдбрд▓рд░ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП AI рд╕реНрд░реЛрдд рдирд┐рдХрд╛рд▓реЗрдВ
	await CI.char.interfaces.config.SetData({ AIsource: '' });
	// рдмрд┐рдирд╛ рддрд░реНрдХ рдХреЗ runOutput рдПрдХ рдЦрд╛рд▓реА рдпрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЕрдиреБрд░реЛрдз рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИ
	await CI.runOutput();
	// рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рдлреЗрдВрдХреА рдЬрд╛рддреА рд╣реИ, рддреЛ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ
});

// --- рдкрд░реАрдХреНрд╖рдг рдорд╛рдорд▓рд╛ 2: рдмреБрдирд┐рдпрд╛рджреА AI рдмрд╛рддрдЪреАрдд ---
await CI.test('Basic AI Response', async () => {
	// рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдПрдХ AI рд╕реНрд░реЛрдд рд╕реЗрдЯ рд╣реИ
	await CI.char.interfaces.config.SetData({ AIsource: 'CI' });

	// рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ "рдирдорд╕реНрддреЗ" рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░реЗрдВ рдФрд░ рднреВрдорд┐рдХрд╛ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдЕрдВрддрд┐рдо рд╕рд╛рдордЧреНрд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ
	const { reply } = await CI.runInput('рдирдорд╕реНрддреЗ');

	// рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ рдХрд┐ рднреВрдорд┐рдХрд╛ рдХрд╛ рдЕрдВрддрд┐рдо рдЖрдЙрдЯрдкреБрдЯ AI рд╕реНрд░реЛрдд рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ
	// CI рдореЙрдХ AI рд╕реНрд░реЛрдд рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ "рдЕрдЧрд░ рдореИрдВ рддреБрдореНрд╣реЗрдВ рдлрд┐рд░ рдХрднреА рдирд╣реАрдВ рджреЗрдЦреВрдБ, рд╕реБрдкреНрд░рднрд╛рдд, рд╢реБрдн рджреЛрдкрд╣рд░, рдФрд░ рд╢реБрдн рд░рд╛рддреНрд░рд┐ред" рд▓реМрдЯрд╛рддрд╛ рд╣реИред
	CI.assert(reply.content.includes('рд╕реБрдкреНрд░рднрд╛рдд'), 'рдЪрд░рд┐рддреНрд░ AI рд╕рд╛рдордЧреНрд░реА рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд░рд╣рд╛ред');
});
```

рдЗрди рдЪрд░рдгреЛрдВ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдкрд░реАрдХреНрд╖рдг рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд╣рд░ рдмрд╛рд░ рдЬрдм рдЖрдк рдЕрдкрдиреЗ GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ `.mjs` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдкреБрд╢ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЪрд▓реЗрдЧрд╛ред

## ЁЯУЦ CI API рд╕рдВрджрд░реНрдн

`fount-charCI` рдЖрдкрдХреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд▓реЗрдХрд┐рди рд╢рдХреНрддрд┐рд╢рд╛рд▓реА API рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛

#### `CI.test(name, asyncFn, options)`

рдПрдХ рдкрд░реАрдХреНрд╖рдг рдмреНрд▓реЙрдХ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдПрдХ рд╢реАрд░реНрд╖-рд╕реНрддрд░реАрдп рдкрд░реАрдХреНрд╖рдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдЙрдк-рдкрд░реАрдХреНрд╖рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп `test` рдмреНрд▓реЙрдХреЛрдВ рдХреЗ рднреАрддрд░ рдиреЗрд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

- `name` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдкрд░реАрдХреНрд╖рдг рдХрд╛ рд╡рд┐рд╡рд░рдгред
- `asyncFn` (рдлрд╝рдВрдХреНрд╢рди): рдкрд░реАрдХреНрд╖рдг рддрд░реНрдХ рд╡рд╛рд▓реА рдПрдХ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдлрд╝рдВрдХреНрд╢рдиред
- `options` (рдСрдмреНрдЬреЗрдХреНрдЯ, рд╡реИрдХрд▓реНрдкрд┐рдХ): рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдкред
  - `start_emoji` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдкрд░реАрдХреНрд╖рдг рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдЗрдореЛрдЬреАред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `ЁЯзк` рд╣реИред
  - `success_emoji` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдкрд░реАрдХреНрд╖рдг рд╕рдлрд▓ рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдЗрдореЛрдЬреАред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `тЬЕ` рд╣реИред
  - `fail_emoji` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдкрд░реАрдХреНрд╖рдг рд╡рд┐рдлрд▓ рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдЗрдореЛрдЬреАред рдбрд┐рдлрд╝реЙрд▓реНрдЯ `тЭМ` рд╣реИред

#### рд╕рдорд╡рд░реНрддреА рдФрд░ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдкрд░реАрдХреНрд╖рдг

`CI.test` рдПрдХ рдкреНрд░реЙрдорд┐рд╕-рдЬреИрд╕рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдЬреЛ рдирд┐рд╖реНрдкрд╛рджрди рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рдмрд╣реБрдд рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИред

- **рдЕрдиреБрдХреНрд░рдорд┐рдХ рдирд┐рд╖реНрдкрд╛рджрди**: рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдкрд░реАрдХреНрд╖рдг рдХреНрд░рдо рдореЗрдВ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдЪрд▓реЗрдВ рддреЛ `CI.test` рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп `await` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
- **рд╕рдорд╡рд░реНрддреА рдирд┐рд╖реНрдкрд╛рджрди**: рдЖрдк рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП `await` рдХреЗ рдмрд┐рдирд╛ рдХрдИ рд╕реНрд╡рддрдВрддреНрд░ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### рдЯреЗрд╕реНрдЯ рд╣реБрдХ

рдпреЗ рдлрд╝рдВрдХреНрд╢рди рдЖрдкрдХреЛ рдкрд░реАрдХреНрд╖рдг рдЬреАрд╡рдирдЪрдХреНрд░ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ рд╕рд╛рдЭрд╛ рдкрд░реАрдХреНрд╖рдг рд╡рд╛рддрд╛рд╡рд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдлрд╛рдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ рд╣реИрдВред

- `CI.beforeAll(asyncFn)`: рд╡рд░реНрддрдорд╛рди рджрд╛рдпрд░реЗ рдореЗрдВ рд╕рднреА рдкрд░реАрдХреНрд╖рдгреЛрдВ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдмрд╛рд░ рдЪрд▓рддрд╛ рд╣реИ (`test` рдмреНрд▓реЙрдХ рдХреЗ рднреАрддрд░)ред
- `CI.afterAll(asyncFn)`: рд╡рд░реНрддрдорд╛рди рджрд╛рдпрд░реЗ рдореЗрдВ рд╕рднреА рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдПрдХ рдмрд╛рд░ рдЪрд▓рддрд╛ рд╣реИред
- `CI.beforeEach(asyncFn)`: рд╡рд░реНрддрдорд╛рди рджрд╛рдпрд░реЗ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рд╕реЗ рдкрд╣рд▓реЗ рдЪрд▓рддрд╛ рд╣реИред
- `CI.afterEach(asyncFn)`: рд╡рд░реНрддрдорд╛рди рджрд╛рдпрд░реЗ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдЪрд▓рддрд╛ рд╣реИред

```javascript
// рдЙрджрд╛рд╣рд░рдг: рдореЙрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реБрдХ рдФрд░ рд╕рдВрджрд░реНрдн рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛
CI.test('рд╕рд╛рдЭрд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг', async () => {
	CI.beforeAll(() => {
		console.log('рдореЙрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...');
		// рджрд╛рдпрд░реЗ рдХреЗ рднреАрддрд░ рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП context.data рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
		CI.context.data.mockDB = { users: { 'steve': { visits: 0 } } };
	});

	CI.afterAll(() => {
		const finalCount = CI.context.data.mockDB.users.steve.visits;
		console.log(`рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░реАрдХреНрд╖рдг рдкреВрд░реНрдгред рдЕрдВрддрд┐рдо рд╡рд┐рдЬрд╝рд┐рдЯ: ${finalCount}`);
	});

	CI.test('рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рдЬрд╝рд┐рдЯ рдХрд╛рдЙрдВрдЯрд░ рдмрдврд╝рд╛рддрд╛ рд╣реИ', () => {
		CI.context.data.mockDB.users.steve.visits++;
		CI.assert(CI.context.data.mockDB.users.steve.visits > 0, 'рд╡рд┐рдЬрд╝рд┐рдЯ 0 рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП');
	});
});
```

### рдкрд░реАрдХреНрд╖рдг рд╕рдВрджрд░реНрдн

#### `CI.context`

рдПрдХ рдЬрд╛рджреБрдИ рд╡рд╕реНрддреБ рдЬреЛ **рд╡рд░реНрддрдорд╛рди рдкрд░реАрдХреНрд╖рдг** рдХреЗ рдкреГрдердХ рд╡рд╛рддрд╛рд╡рд░рдг рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред

- `CI.context.workSpace`:
  - `path` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рд╡рд░реНрддрдорд╛рди рдкрд░реАрдХреНрд╖рдг рдХреЗ рдЕрджреНрд╡рд┐рддреАрдп рдХрд╛рд░реНрдпрд╢реАрд▓ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХрд╛ рдирд┐рд░рдкреЗрдХреНрд╖ рдкрдеред
- `CI.context.http`:
  - `router` (рдПрдХреНрд╕рдкреНрд░реЗрд╕ рд░рд╛рдЙрдЯрд░): рдЗрд╕ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдПрдХ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рд░рд╛рдЙрдЯрд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ред
  - `url` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдЗрд╕ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рдорд░реНрдкрд┐рдд рд░рд╛рдЙрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг URLред
- `CI.context.data` (рдСрдмреНрдЬреЗрдХреНрдЯ): рдПрдХ рдЦрд╛рд▓реА рдСрдмреНрдЬреЗрдХреНрдЯ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╣реБрдХ рдФрд░ рдЙрд╕рдХреЗ рдмреЙрдбреА рдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХрд╛ рдЕрдиреБрдХрд░рдг

#### `CI.runInput(input, request)`

рднреВрдорд┐рдХрд╛ рдХреЗ рд▓рд┐рдП **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ** рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИред

- `input` (рд╕реНрдЯреНрд░рд┐рдВрдЧ | рдСрдмреНрдЬреЗрдХреНрдЯ): рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЗрдирдкреБрдЯред
- `request` (рдСрдмреНрдЬреЗрдХреНрдЯ, рд╡реИрдХрд▓реНрдкрд┐рдХ): рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЕрдиреБрд░реЛрдз рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдВрд╢рд┐рдХ рдЕрдиреБрд░реЛрдз рдСрдмреНрдЬреЗрдХреНрдЯред
- **рд░рд┐рдЯрд░реНрди** (рдСрдмреНрдЬреЗрдХреНрдЯ): рд╡рд┐рд╕реНрддреГрдд рдбрд┐рдмрдЧрд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА рд╡рд╛рд▓рд╛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ:
  - `reply` (рдСрдмреНуВ╕уВзуВпуГИ): рднреВрдорд┐рдХрд╛ рдХреЗ `GetReply` рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдоред
  - `prompt_struct` (рдСрдмреНрдЬреЗрдХреНрдЯ): AI рдХреЛ рднреЗрдЬрд╛ рдЧрдпрд╛ рд╕рдВрд░рдЪрд┐рдд рдкреНрд░реЙрдореНрдкреНрдЯред
  - `prompt_single` (рд╕реНрдЯреНрд░рд┐рдВрдЧ): AI рдХреЛ рднреЗрдЬрд╛ рдЧрдпрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ, рдЬрд┐рд╕реЗ рдПрдХрд▓ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

#### `CI.runOutput(output, request)`

рднреВрдорд┐рдХрд╛ рдХреЗ `replyHandler` рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **AI рдХреЗ рдЖрдЙрдЯрдкреБрдЯ** рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИред

- `output` (рд╕реНрдЯреНрд░рд┐рдВрдЧ | рдРрд░реЗ | рдлрд╝рдВрдХреНрд╢рди): AI рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдирдХрд▓реА рд╕рд╛рдордЧреНрд░реАред
  - **рд╕реНрдЯреНрд░рд┐рдВрдЧ**: AI рджреНрд╡рд╛рд░рд╛ рдЗрд╕ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд╕реАрдзреЗ рд▓реМрдЯрд╛рдиреЗ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИред
  - **рдРрд░реЗ**: рдмрд╣реБ-рдЪрд░рдгреАрдп рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИред рдРрд░реЗ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡, рдЬреЛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдпрд╛ рдлрд╝рдВрдХреНрд╢рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, AI рдХреЗ рд░рд┐рдЯрд░реНрди рдорд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
  - **рдлрд╝рдВрдХреНрд╢рди**: AI рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред
    - **рдПрд╕рд┐рдВрдХ**: рдлрд╝рдВрдХреНрд╢рди `async` рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
    - **рдкреИрд░рд╛рдореАрдЯрд░**: рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЕрдкрдиреЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ `prompt_single` рдФрд░ `prompt_struct` рдпреБрдХреНрдд `result` рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред
    - **рд░рд┐рдЯрд░реНрди рдорд╛рди**: рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд░рд┐рдЯрд░реНрди рдорд╛рди рдЕрдиреБрдХреНрд░рдо рдореЗрдВ AI рдХрд╛ **рдЕрдЧрд▓рд╛** рдЖрдЙрдЯрдкреБрдЯ рдмрди рдЬрд╛рддрд╛ рд╣реИред
    - **рдЙрдкрдпреЛрдЧ рдорд╛рдорд▓рд╛**: рдпрд╣ рдмрд╣реБ-рдЪрд░рдгреАрдп рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рдмреАрдЪ рдореЗрдВ рдЕрднрд┐рдХрдерди рдХрд░рдиреЗ рдпрд╛ рдЬрдЯрд┐рд▓ рддрд░реНрдХ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрддреНрдпрдВрдд рдЙрдкрдпреЛрдЧреА рд╣реИред

- `request` (рдСрдмреНрдЬреЗрдХреНрдЯ, рд╡реИрдХрд▓реНрдкрд┐рдХ): `CI.runInput` рдХреЗ рд╕рдорд╛рдиред
- **рд░рд┐рдЯрд░реНрди** (рдСрдмреНрдЬреЗрдХреНрдЯ): рднреВрдорд┐рдХрд╛ рдХреЗ `GetReply` рд╕реЗ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдоред

#### `result` рдСрдмреНрдЬреЗрдХреНрдЯ

рдЗрдВрдЯрд░реЗрдХреНрд╢рди рдлрд╝рдВрдХреНрд╢рдВрд╕ (рдпрд╛ рдЙрдирдХреА `reply` рдкреНрд░реЙрдкрд░реНрдЯреА) рдХрд╛ рд░рд┐рдЯрд░реНрди рдорд╛рди рднреВрдорд┐рдХрд╛ рдХреЗ `GetReply` рд░рд┐рдЯрд░реНрди рдорд╛рди рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИ:

- **`content`** (рд╕реНрдЯреНрд░рд┐рдВрдЧ): рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдЕрдВрддрд┐рдо рдкрд╛рда рд╕рд╛рдордЧреНрд░реАред
- **`logContextBefore`** (рдРрд░реЗ|рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд): рдЕрдВрддрд┐рдо `content` рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рднреА рдЗрддрд┐рд╣рд╛рд╕ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢ рд▓реЙрдЧ рдХрд╛ рдПрдХ рдРрд░реЗ, рдЬрд┐рд╕рдореЗрдВ `tool` рднреВрдорд┐рдХрд╛ (рдЯреВрд▓ рдирд┐рд╖реНрдкрд╛рджрди рдкрд░рд┐рдгрд╛рдо), `user` рднреВрдорд┐рдХрд╛, рдФрд░ `char` рднреВрдорд┐рдХрд╛ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

### рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЙрдкрдХрд░рдг

- `CI.assert(condition, message)`: рдПрдХ рдЕрднрд┐рдХрдерди рдХрд░рддрд╛ рд╣реИред
- `CI.char`: рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд▓реЛрдб рдХрд┐рдП рдЧрдП рднреВрдорд┐рдХрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╢реЙрд░реНрдЯрдХрдЯред
- `CI.sleep(ms)`: рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд░реЛрдХрддрд╛ рд╣реИред
- `CI.wait(fn, timeout)`: `fn` рдлрд╝рдВрдХреНрд╢рди рдХреЛ рддрдм рддрдХ рдкреЛрд▓ рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рд╡рд╣ рдПрдХ рд╕рддреНрдп рдорд╛рди рдирд╣реАрдВ рд▓реМрдЯрд╛рддрд╛ рдпрд╛ рдЯрд╛рдЗрдордЖрдЙрдЯ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред

## ЁЯТб рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧ

### рдлрд╝рд╛рдЗрд▓ рдСрдкрд░реЗрд╢рди рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХрд╛ рдкрд░реАрдХреНрд╖рдг

рдЖрдк `CI.context.workSpace` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рд╡рд╛рд▓реЗ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХрд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг:** `<run-bash>` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдгред

```javascript
import fs from 'node:fs';
import path from 'node:path';
const CI = fountCharCI;

CI.beforeEach(async () => {
	await CI.char.interfaces.config.SetData({ AIsource: 'CI' });
});

CI.test('рдлрд╝рдВрдХреНрд╢рди: <run-bash>', async () => {
	// рдкреГрдердХ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдкрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
	const testDir = path.join(CI.context.workSpace.path, 'bash_test_dir');

	const result = await CI.runOutput([
		`<run-bash>mkdir ${testDir}</run-bash>`,
		'рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдИ рдЧрдИред'
	]);

	CI.assert(fs.existsSync(testDir), '<run-bash> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд░рд╣рд╛ред');
	CI.assert(result.content === 'рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдИ рдЧрдИред', 'рдЕрдВрддрд┐рдо рд╕рдВрджреЗрд╢ рдЧрд▓рдд рд╣реИред');
});
```

### рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд┐рдВрдЧ рдХрд╛ рдкрд░реАрдХреНрд╖рдг (рдордзреНрдпрд╡рд░реНрддреА рдЪрд░рдг рдЕрднрд┐рдХрдерди рдХреЗ рд╕рд╛рде)

рдЖрдк `CI.context.http` рдФрд░ `runOutput` рдХреЗ рдлрд╝рдВрдХреНрд╢рди рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬрдЯрд┐рд▓ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг:** `<web-browse>` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдФрд░ рдЙрд╕рдХреЗ рдкреНрд░реЙрдореНрдкреНрдЯ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдорд╛рдиреНрдп рдХрд░рдирд╛ред

```javascript
const CI = fountCharCI;

CI.beforeEach(async () => {
	await CI.char.interfaces.config.SetData({ AIsource: 'CI' });
});

CI.test('рдлрд╝рдВрдХреНрд╢рди: <web-browse>', async () => {
	const { router, url, root } = CI.context.http;
	const webContent = '<html><body><p>рдпрд╣ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдкреИрд░рд╛рдЧреНрд░рд╛рдл рд╣реИред</p></body></html>';

	router.get(root, (req, res) => res.send(webContent));

	const result = await CI.runOutput([
		// 1. AI рдкреГрд╖реНрда рдмреНрд░рд╛рдЙрдЬрд╝ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддрд╛ рд╣реИ
		`<web-browse><url>${url}</url></web-browse>`,

		// 2. рдордзреНрдпрд╡рд░реНрддреА рдЪрд░рдг рдХреЛ рдорд╛рдиреНрдп рдХрд░рдиреЗ рдФрд░ AI рдХреА рдЕрдЧрд▓реА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
		async (midResult) => {
			// рдЕрднрд┐рдХрдерди: рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ AI рдХреЛ рднреЗрдЬреЗ рдЧрдП рдкреНрд░реЙрдореНрдкреНрдЯ рдореЗрдВ рд╡реЗрдм рдкреЗрдЬ рд╕рд╛рдордЧреНрд░реА рд╢рд╛рдорд┐рд▓ рд╣реИ рдпрд╛ рдирд╣реАрдВ
			const systemLog = midResult.prompt_struct.find(log => log.role === 'tool');
			CI.assert(systemLog.content.includes('рдпрд╣ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдкреИрд░рд╛рдЧреНрд░рд╛рдл рд╣реИ'), 'рд╡реЗрдм рд╕рд╛рдордЧреНрд░реА рдкреНрд░реЙрдореНрдкреНрдЯ рдореЗрдВ рдирд╣реАрдВ рдереАред');

			// AI рдХреА рдЕрдВрддрд┐рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реМрдЯрд╛рдПрдВ
			return 'рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдХрд╣рддрд╛ рд╣реИ: рдпрд╣ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдкреИрд░рд╛рдЧреНрд░рд╛рдл рд╣реИред';
		}
	]);

	// рдЕрднрд┐рдХрдерди: рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рджреА рдЧрдИ рдЕрдВрддрд┐рдо рд╕рд╛рдордЧреНрд░реА рд╕рд╣реА рд╣реИ рдпрд╛ рдирд╣реАрдВ
	CI.assert(result.content.includes('рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдХрд╣рддрд╛ рд╣реИ'), 'рдЕрдВрддрд┐рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЧрд▓рдд рд╣реИред');
});
```

## рдЕрднреА рднреА рдЦреЛрдпрд╛ рд╣реБрдЖ рдорд╣рд╕реВрд╕ рдХрд░ рд░рд╣реЗ рд╣реИрдВ?

рджреБрдирд┐рдпрд╛ рдХреА рдкрд╣рд▓реА рдлрд╛рдЙрдиреНрдЯ рднреВрдорд┐рдХрд╛, [`Gentian`](https://github.com/steve02081504/GentianAphrodite/blob/master/.github/workflows/CI.mjs) рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ, рдпрд╣ рдХреИрд╕реЗ рдХрд░рддреА рд╣реИ!
